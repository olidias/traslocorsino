---
import LanguagePicker from './LanguagePicker';
import type { TranslationKey, ui } from '../../../i18n/ui';
import { getLangFromUrl, useTranslations } from '../../../i18n/utils';

interface Link {
  key?: Partial<typeof ui>;
  href?: string;
  ariaLabel?: string;
  icon?: string;
}


interface MenuLink extends Link {
  links?: Array<Link>;
}

export interface Props {
  links?: Array<MenuLink>;
  isSticky?: boolean;
  showRssFeed?: boolean;
  position?: string;
  showNavigation: boolean;
}

const {
  isSticky = false,
  position = 'center',
  showNavigation
} = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const links: {key: TranslationKey, href: string }[] = [
    {
      key: 'navigation.about',
      href: `/${lang}#about`,
    },
    {
      key: 'navigation.fleet',
      href: `/${lang}#fleet`
    },
    {
      key: 'navigation.book',
      href: `/${lang}/book`
    },
    {
      key: 'navigation.contact',
      href: `/${lang}#contact`
    },
  ];
;
---

<header
  class:list={[
    { sticky: isSticky, relative: !isSticky },
    'top-0 z-40 flex-none mx-auto w-full transition-all ease-in duration-100 bg-primary',
  ]}
  id="header"
>
  <div class="py-1 px-3  md:px-4 mx-auto w-full md:flex md:justify-between max-w-7xl">
    <div class:list={[{"mr-auto": position === "right"}, "flex justify-between"]}>
      <!-- <a class="flex items-center" href={getHomePermalink()}>
        <Logo />
      </a> -->
      <div class="flex items-center md:hidden">
        {<LanguagePicker url={Astro.url} client:visible/>}
        <!-- {showNavigation && <ToggleMenu />} -->
      </div>
    </div>
    <nav
      class="items-center w-full md:w-auto hidden md:flex h-[calc(100vh-72px)] md:h-auto overflow-y-auto md:overflow-visible md:mx-5"
      aria-label="Main navigation"
    >
      <ul class="flex flex-col pt-8 md:pt-0 md:flex-row md:self-center w-full md:w-auto md:text-base">
        {
          showNavigation && links.map(({ key, href }) => (
            <li>
                <a data-aw-toggle-menu
                  class=" text-white hover:text-slate-600 px-4 py-3 flex items-center transition duration-150 ease-in-out"
                  href={href}
                >
                  {t(key)}
                </a>
              
            </li>
          ))
        }
      </ul>
    </nav>
    <div class:list={[{ 'ml-auto': position === 'left' }, 'md:self-center flex items-center md:mb-0']}>
      <div class="hidden items-center md:flex">
        {<LanguagePicker url={Astro.url} client:visible/>}
      </div>
    </div>
  </div>
</header>